'use strict';

(function () {

    fetch('./posts/posts.json').then(function (res) {
        return res.json();
    }).then(function (data) {
        return console.log(data);
    });
    var List = {
        template: '#list-template',
        data: function data() {
            return {
                posts: []
            };
        },
        mounted: function mounted() {
            this.getPosts();
        },

        methods: {
            getPosts: function getPosts() {
                var _this = this;

                fetch('./posts/posts.json').then(function (res) {
                    return res.json();
                }).then(function (data) {
                    return _this.posts = data._Entries;
                }).catch(function (error) {
                    console.log(error);
                });
            }
        }
    };

    // Post component
    var Post = {
        template: '#post-template',
        data: function data() {
            return {
                post: null
            };
        },
        mounted: function mounted() {
            this.getPosts();
        },

        methods: {
            getPosts: function getPosts() {
                var _this2 = this;

                var id = this.$route.params.id;
                console.log(id);
                fetch('./posts/posts.json').then(function (res) {
                    return res.json();
                }).then(function (data) {
                    return _this2.post = data._Entries.filter(function (item) {
                        return item.Id === id;
                    })[0];
                }).catch(function (error) {
                    console.log(error);
                });
            }
        }
    };

    // Create vue router
    var router = new VueRouter({
        routes: [{
            name: 'homepage',
            path: '/',
            component: List
        }, {
            name: 'post',
            path: '/:id',
            component: Post
        }]
    });

    // Create vue instance with our router, and mount onto #app
    var vue = new Vue({ router: router });
    var app = vue.$mount('#app');
})();